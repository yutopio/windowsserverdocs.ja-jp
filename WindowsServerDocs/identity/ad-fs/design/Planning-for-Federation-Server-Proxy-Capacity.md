---
description: 詳細については、「フェデレーションサーバープロキシの容量の計画」を参照してください。
ms.assetid: 3ecb6e87-17f1-4d38-97d2-9c4d52b7cf39
title: フェデレーション サーバー プロキシのキャパシティ プランニング
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.openlocfilehash: a8454210db5c9d15cd308e67e23717e00724b81c
ms.sourcegitcommit: 65b6de6b44d41f1180c45db11cdd60cb2a093b46
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/10/2020
ms.locfileid: "97039980"
---
# <a name="planning-for-federation-server-proxy-capacity"></a>フェデレーション サーバー プロキシのキャパシティ プランニング

フェデレーションサーバープロキシの容量計画では、次のことを見積もることができます。

-   各フェデレーションサーバープロキシの適切なハードウェア要件。

-   各組織に配置するフェデレーションサーバーとフェデレーションサーバープロキシの数。

フェデレーションサーバープロキシは、企業ネットワーク内の保護されたフェデレーションサーバーからフェデレーションユーザーにセキュリティトークンをリダイレクトします。 フェデレーションサーバープロキシを展開する目的は、外部ユーザーがフェデレーションサーバーに接続できるようにすることです。 実際には、トークンに署名したり、AD FS 構成データベースのデータに書き込んだりすることはありません。 そのため、フェデレーションサーバープロキシのハードウェア要件は、通常、フェデレーションサーバーのハードウェア要件を下回っています。

フェデレーションサーバープロキシに対する要求はすべて、フェデレーションサーバーまたはフェデレーションサーバーファームに要求されるため、フェデレーションサーバーとフェデレーションサーバープロキシのキャパシティプランニングは並列で実行する必要があります。

フェデレーションサーバープロキシの1秒あたりのピークサインイン数を推定するには、フェデレーション \- サーバープロキシ経由でサインインするフェデレーションユーザーの使用パターンを理解する必要があります。 多くの展開では、フェデレーションサーバープロキシを使用してサインインするフェデレーションユーザーは、インターネット上に配置されます。 \-AD FS によって保護される既存の Web アプリケーションで、これらのフェデレーションユーザーの使用パターンを確認することで、1秒あたりのピーク時のサインイン数を推定できます。

> [!NOTE]
> 運用環境の展開では、展開する各フェデレーションサーバーファームインスタンスに対して、少なくとも2つのフェデレーションサーバープロキシを使用することをお勧めします。

## <a name="estimate-the-number-of-federation-server-proxies-required-for-your-organization"></a>組織に必要なフェデレーションサーバープロキシの数を推定する
必要な AD FS フェデレーションサーバープロキシコンピューターの数を推定するには、まず、組織に展開するフェデレーションサーバーの合計数を決定する必要があります。 この方法の詳細については、「 [フェデレーションサーバーの容量の計画](Planning-for-Federation-Server-Capacity.md)」を参照してください。

フェデレーションサーバーの数を決定したら、この数のサーバーを、企業ネットワークの外部にある外部ユーザーからの受信フェデレーション認証要求の割合で乗算し \( \) ます。 この計算の値によって、外部ユーザーに対する受信認証要求を処理するフェデレーションサーバープロキシの推定数が示されます。

たとえば、推奨されるフェデレーションサーバーの数が3で、外部ユーザーからの認証要求の合計数が、フェデレーション認証要求の合計数の約60% であると予想される場合、計算は 1.8 3 60 と等しくなります。この場合、 \( \) 2 に切り上げることができます。  この場合、3つのフェデレーションサーバーに対する外部ユーザー認証要求の負荷に対応するために、2つのフェデレーションサーバープロキシコンピューターを展開する必要があります。

AD FS 製品チームによって実行されるテストでは、各フェデレーションサーバープロキシの全体的な CPU 使用率が、同じファームのフェデレーションサーバーで確認された CPU 使用率を大幅に下回っていることがわかりました。  1つのテストでは、1つのフェデレーションサーバー CPU が完全に飽和状態であることを示していましたが、同じファームに対してプロキシサービスを提供しているフェデレーションサーバープロキシの CPU は、20% の使用率でのみ観察されました。 したがって、このテストでは、フェデレーションサーバープロキシの CPU の負荷が、このセクションで前述した同様のハードウェア仕様を使用していると、約3台のフェデレーションサーバーの処理負荷を適切に処理できることが明らかになりました。

ただし、フォールトトレランスのためには、展開する各フェデレーションサーバーファームに対して、少なくとも2つのフェデレーションサーバープロキシを使用することをお勧めします。

## <a name="see-also"></a>関連項目
[Windows Server 2012 での AD FS 設計ガイド](AD-FS-Design-Guide-in-Windows-Server-2012.md)
