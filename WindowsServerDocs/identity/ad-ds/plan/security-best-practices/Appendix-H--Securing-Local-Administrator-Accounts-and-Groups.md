---
ms.assetid: ea015cbc-dea9-4c72-a9d8-d6c826d07608
title: 付録 H-ローカル管理者アカウントとグループをセキュリティで保護する
author: iainfoulds
ms.author: daveba
manager: daveba
ms.date: 05/31/2017
ms.topic: article
ms.openlocfilehash: aaf1557ccfa12c017139c29d48c6f7661abd5584
ms.sourcegitcommit: 3181fcb69a368f38e0d66002e8bc6fd9628b1acc
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/30/2020
ms.locfileid: "96330474"
---
# <a name="appendix-h-securing-local-administrator-accounts-and-groups"></a>付録 H: ローカル管理者アカウントとグループをセキュリティで保護する

> 適用先:Windows Server 2016 では、Windows Server 2012 R2、Windows Server 2012


## <a name="appendix-h-securing-local-administrator-accounts-and-groups"></a>付録 H: ローカル管理者アカウントとグループをセキュリティで保護する

現在メインストリームサポートで使用されているすべてのバージョンの Windows では、ローカル管理者アカウントが既定で無効になっています。これにより、ハッシュやその他の資格情報の盗難攻撃でアカウントが使用できなくなります。 ただし、レガシオペレーティングシステムを含む環境やローカルの管理者アカウントが有効になっている環境では、これらのアカウントを前述のように使用して、メンバーのサーバーやワークステーション間でセキュリティを侵害することができます。 各ローカル管理者アカウントとグループは、後で説明する手順に従ってセキュリティで保護する必要があります。

組み込みの管理者 (BA) グループをセキュリティで保護する場合の考慮事項の詳細については、「 [Least-Privilege 管理モデルの実装](../../../ad-ds/plan/security-best-practices/Implementing-Least-Privilege-Administrative-Models.md)」を参照してください。

#### <a name="controls-for-local-administrator-accounts"></a>ローカル管理者アカウントのコントロール

フォレスト内の各ドメインのローカル管理者アカウントについては、次の設定を構成する必要があります。

- ドメインに参加しているシステムでドメインの管理者アカウントの使用を制限するように Gpo を構成する
    - 1つまたは複数の Gpo を作成し、各ドメインのワークステーションとメンバーサーバー Ou にリンクするには、Administrator アカウントを **Computer Configuration\Policies\Windows** の次のユーザー権利に追加します。

        - ネットワークからこのコンピューターへのアクセスを拒否

        - バッチ ジョブとしてのログオン権限を拒否する

        - サービスとしてのログオン権限を拒否する

        - リモート デスクトップ サービスを使ったログオンを拒否

#### <a name="step-by-step-instructions-to-secure-local-administrators-groups"></a>ローカルの管理者グループをセキュリティで保護するための詳細な手順

###### <a name="configuring-gpos-to-restrict-administrator-account-on-domain-joined-systems"></a>Domain-Joined システムの管理者アカウントを制限するように Gpo を構成する

1. **サーバーマネージャー** で、[**ツール**] をクリックし、[**グループポリシーの管理**] をクリックします。

2. コンソールツリーで、[ドメイン \<Forest\><ドメイン] を展開し、 \\ オブジェクトを \> **グループポリシー** し \<Forest\> ます (はフォレストの名前、 \<Domain\> はグループポリシーを設定するドメインの名前です)。

3. コンソールツリーで、[ **グループポリシーオブジェクト**] を右クリックし、[ **新規**] をクリックします。

    ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_101.png)

4. [ **新しい gpo** ] ダイアログボックスで、「」と入力し、 **\<GPO Name\>** [ **OK** ] ( \<GPO Name\> はこの GPO の名前) をクリックします。

    ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_102.png)

5. 詳細ペインで **\<GPO Name\>** 、を右クリックし、[ **編集**] をクリックします。

6. [ **Computer Configuration\Policies\Windows**] [] 権利] [ポリシー] に移動し、[ **ユーザー権利の割り当て**] をクリックします。

    ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_103.png)

7. ローカル管理者アカウントがネットワーク経由でメンバーサーバーとワークステーションにアクセスするのを防ぐために、次の手順を実行してユーザーの権限を構成します。

    1. [ **ネットワークからこのコンピューターへのアクセスを拒否する** ] をダブルクリックし、[ **これらのポリシー設定を定義** する] を選択します。

    2. [ **ユーザーまたはグループの追加**] をクリックし、ローカル管理者アカウントのユーザー名を入力して、[ **OK]** をクリックします。 このユーザー名は、Windows がインストールされている場合の既定の **管理者** になります。

        ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_104.png)

    3. [OK] をクリックします。

        > [!IMPORTANT]
        > これらの設定に管理者アカウントを追加するときに、アカウントのラベル付け方法によってローカル管理者アカウントとドメイン管理者アカウントのどちらを構成するかを指定します。 たとえば、TAILSPINTOYS ドメインの管理者アカウントをこれらの拒否権限に追加するには、TAILSPINTOYS ドメインの管理者アカウントを参照します。これは TAILSPINTOYS\Administrator. と表示されます。 グループポリシーオブジェクトエディターのこれらのユーザー権利設定で「 **Administrator** 」と入力した場合は、前述のように、GPO が適用される各コンピューターのローカル管理者アカウントを制限します。

8. ローカル管理者アカウントがバッチジョブとしてログオンしないようにするには、次の手順を実行してユーザーの権限を構成します。

    1. [ **バッチジョブとしてログオンを拒否する** ] をダブルクリックし、[ **これらのポリシー設定を定義** する] を選択します。

    2. [ **ユーザーまたはグループの追加**] をクリックし、ローカル管理者アカウントのユーザー名を入力して、[ **OK]** をクリックします。 このユーザー名は、Windows がインストールされている場合の既定の **管理者** になります。

        ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_105.png)

    3. **[OK]** をクリックします。

        > [!IMPORTANT]
        > これらの設定に管理者アカウントを追加するときに、アカウントのラベル付け方法によってローカル管理者アカウントとドメイン管理者アカウントのどちらを構成するかを指定します。 たとえば、TAILSPINTOYS ドメインの管理者アカウントをこれらの拒否権限に追加するには、TAILSPINTOYS ドメインの管理者アカウントを参照します。これは TAILSPINTOYS\Administrator. と表示されます。 グループポリシーオブジェクトエディターのこれらのユーザー権利設定で「 **Administrator** 」と入力した場合は、前述のように、GPO が適用される各コンピューターのローカル管理者アカウントを制限します。

9. 次の手順を実行して、ローカル管理者アカウントがサービスとしてログオンするのを防ぐために、ユーザーの権限を構成します。

    1. [ **サービスとしてログオンを拒否する** ] をダブルクリックし、[ **これらのポリシー設定を定義** する] を選択します。

    2. [ **ユーザーまたはグループの追加**] をクリックし、ローカル管理者アカウントのユーザー名を入力して、[ **OK]** をクリックします。 このユーザー名は、Windows がインストールされている場合の既定の **管理者** になります。

        ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_106.png)

    3. **[OK]** をクリックします。

        > [!IMPORTANT]
        > これらの設定に管理者アカウントを追加するときに、アカウントのラベル付け方法によってローカル管理者アカウントとドメイン管理者アカウントのどちらを構成するかを指定します。 たとえば、TAILSPINTOYS ドメインの管理者アカウントをこれらの拒否権限に追加するには、TAILSPINTOYS ドメインの管理者アカウントを参照します。これは TAILSPINTOYS\Administrator. と表示されます。 グループポリシーオブジェクトエディターのこれらのユーザー権利設定で「 **Administrator** 」と入力した場合は、前述のように、GPO が適用される各コンピューターのローカル管理者アカウントを制限します。

10. 次の手順を実行して、ローカル管理者アカウントがリモートデスクトップサービス経由でメンバーサーバーおよびワークステーションにアクセスできないようにするには、ユーザー権限を構成します。

    1. [ **リモートデスクトップサービスのログオンを拒否** する] をダブルクリックし、[ **これらのポリシーの設定を定義** する] を選択します。

    2. [ **ユーザーまたはグループの追加**] をクリックし、ローカル管理者アカウントのユーザー名を入力して、[ **OK]** をクリックします。 このユーザー名は、Windows がインストールされている場合の既定の **管理者** になります。

        ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_107.png)

    3. **[OK]** をクリックします。

        > [!IMPORTANT]
        > これらの設定に管理者アカウントを追加するときに、アカウントのラベル付け方法によってローカル管理者アカウントとドメイン管理者アカウントのどちらを構成するかを指定します。 たとえば、TAILSPINTOYS ドメインの管理者アカウントをこれらの拒否権限に追加するには、TAILSPINTOYS ドメインの管理者アカウントを参照します。これは TAILSPINTOYS\Administrator. と表示されます。 グループポリシーオブジェクトエディターのこれらのユーザー権利設定で「 **Administrator** 」と入力した場合は、前述のように、GPO が適用される各コンピューターのローカル管理者アカウントを制限します。

11. **グループポリシー管理エディター** を終了するには、[**ファイル**] をクリックし、[**終了**] をクリックします。

12. **グループポリシー管理** で、次の手順に従って、GPO をメンバーサーバーとワークステーションの ou にリンクします。

    1. \<Forest\>\ Domains \\<ドメイン \> ( \<Forest\> はフォレストの名前、 \<Domain\> はグループポリシーを設定するドメインの名前) の順に移動します。

    2. GPO が適用される OU を右クリックし、[既存の **gpo のリンク**] をクリックします。

        ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_108.png)

    3. 作成した GPO を選択し、[ **OK]** をクリックします。

        ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_109.png)

    4. ワークステーションが含まれている他のすべての Ou へのリンクを作成します。

    5. メンバーサーバーを含む他のすべての Ou へのリンクを作成します。

#### <a name="verification-steps"></a>検証手順

##### <a name="verify-deny-access-to-this-computer-from-the-network-gpo-settings"></a>[ネットワークからこのコンピューターへのアクセスを拒否する] GPO 設定を確認する

GPO の変更の影響を受けないメンバーサーバーまたはワークステーション (ジャンプサーバーなど) から、GPO の変更の影響を受けるネットワーク経由でメンバーサーバーまたはワークステーションへのアクセスを試みます。 GPO 設定を確認するには、 **NET use** コマンドを使用してシステムドライブをマップします。

1. GPO の変更の影響を受けていないメンバーサーバーまたはワークステーションにローカルでログオンします。

2. マウスを使用して、画面の右上隅または右下隅にポインターを移動します。 **Charms** バーが表示されたら、[**検索**] をクリックします。

3. **検索** ボックスに「**コマンドプロンプト**」と入力し、[**コマンドプロンプト**] を右クリックします。次に、[**管理者として実行**] をクリックして、管理者特権でのコマンドプロンプトを開きます。

4. 昇格の承認を求めるメッセージが表示されたら、[ **はい]** をクリックします。

    ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_110.png)

5. **コマンドプロンプト** ウィンドウで、「」と入力し `net use \\<Server Name>\c$ /user:<Server Name>\Administrator` \<Server Name\> ます。には、ネットワーク経由でアクセスしようとしているメンバーサーバーまたはワークステーションの名前を指定します。

    > [!NOTE]
    > ローカル管理者の資格情報は、ネットワーク経由でアクセスしようとしているシステムと同じである必要があります。

6. 次のスクリーンショットは、表示する必要があるエラーメッセージを示しています。

    ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_111.png)

##### <a name="verify-deny-log-on-as-a-batch-job-gpo-settings"></a>"バッチジョブとしてログオンを拒否する" GPO 設定を確認する

GPO の変更の影響を受けたメンバーサーバーまたはワークステーションから、ローカルにログオンします。

###### <a name="create-a-batch-file"></a>バッチファイルを作成する

1. マウスを使用して、画面の右上隅または右下隅にポインターを移動します。 **Charms** バーが表示されたら、[**検索**] をクリックします。

2. **検索** ボックスに「 **notepad**」と入力し、[ **notepad**] をクリックします。

3. **メモ帳** で、「 **dir c:**」と入力します。

4. [ **ファイル**] をクリックし、[ **名前を付けて保存**] をクリックします。

5. [ **ファイル名** ] ボックスに「」と入力 `<Filename>.bat` します (ここで、 \<Filename\> は新しいバッチファイルの名前です)。

###### <a name="schedule-a-task"></a>タスクのスケジュール設定

1. マウスを使用して、画面の右上隅または右下隅にポインターを移動します。 **Charms** バーが表示されたら、[**検索**] をクリックします。

2. **検索** ボックスに「task scheduler」と入力し、[**タスクスケジューラ**] をクリックします。

    > [!NOTE]
    > Windows 8 を実行しているコンピューターの場合は、[ **検索** ] ボックスに「 **スケジュールタスク**」と入力し、[ **タスクのスケジュール**] をクリックします。

3. [ **アクション**] をクリックし、[ **タスクの作成**] をクリックします。

4. [ **タスクの作成** ] ダイアログボックスで、「」と入力し **\<Task Name\>** ます (ここで、 \<Task Name\> は新しいタスクの名前です)。

5. [ **操作** ] タブをクリックし、[ **新規作成**] をクリックします。

6. [ **アクション** ] フィールドで、[ **プログラムの開始**] をクリックします。

7. [ **プログラム/スクリプト** ] フィールドの [ **参照**] をクリックし、[ **バッチファイルの作成** ] セクションで作成したバッチファイルを探して選択し、[ **開く**] をクリックします。

8. **[OK]** をクリックします。

9. **[General]** タブをクリックします。

10. [ **セキュリティオプション** ] フィールドで、[ **ユーザーまたはグループの変更**] をクリックします。

11. システムのローカル管理者アカウントの名前を入力し、[ **名前の確認**] をクリックして、[ **OK**] をクリックします。

12. [ **ユーザーがログオンしているかどうかにかかわら** ず、 **パスワードを保存** しない] を選択します。 タスクは、ローカルコンピューターのリソースにのみアクセスできます。

13. **[OK]** をクリックします。

14. タスクを実行するためのユーザーアカウントの資格情報を要求するダイアログボックスが表示されます。

15. 資格情報を入力したら、[ **OK]** をクリックします。

16. 次のようなダイアログボックスが表示されます。

    ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_112.png)

###### <a name="verify-deny-log-on-as-a-service-gpo-settings"></a>"サービスとしてログオンを拒否する" GPO 設定を確認する

1. GPO の変更の影響を受けたメンバーサーバーまたはワークステーションから、ローカルにログオンします。

2. マウスを使用して、画面の右上隅または右下隅にポインターを移動します。 **Charms** バーが表示されたら、[**検索**] をクリックします。

3. **検索** ボックスに「**サービス**」と入力し、[**サービス**] をクリックします。

4. [ **印刷スプーラ**] を見つけてダブルクリックします。

5. **[ログオン]** タブをクリックします。

6. [ **ログオン** の方法] ボックスで、[ **このアカウント**] をクリックします。

7. [ **参照**] をクリックし、システムのローカル管理者アカウントを入力して、[ **名前の確認**] をクリックし、[ **OK**] をクリックします。

8. [ **パスワード** ] フィールドと [ **パスワードの確認** 入力] フィールドに、選択したアカウントのパスワードを入力し、[ **OK]** をクリックします。

9. [ **OK]** を3回クリックします。

10. [ **印刷スプーラ** ] を右クリックし、[ **再起動**] をクリックします。

11. サービスを再起動すると、次のようなダイアログボックスが表示されます。

    ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_113.png)

###### <a name="revert-changes-to-the-printer-spooler-service"></a>プリンタスプーラサービスへの変更を元に戻す

1. GPO の変更の影響を受けたメンバーサーバーまたはワークステーションから、ローカルにログオンします。

2. マウスを使用して、画面の右上隅または右下隅にポインターを移動します。 **Charms** バーが表示されたら、[**検索**] をクリックします。

3. **検索** ボックスに「**サービス**」と入力し、[**サービス**] をクリックします。

4. [ **印刷スプーラ**] を見つけてダブルクリックします。

5. **[ログオン]** タブをクリックします。

6. [ **ログオン** の方法] フィールドで、[ **ローカルシステムアカウント**] を選択し、[ **OK**] をクリックします。

###### <a name="verify-deny-log-on-through-remote-desktop-services-gpo-settings"></a>GPO 設定の [リモートデスクトップサービスのログオンを拒否する] を確認します。

1. マウスを使用して、画面の右上隅または右下隅にポインターを移動します。 **Charms** バーが表示されたら、[**検索**] をクリックします。

2. **検索** ボックスに「**リモートデスクトップ接続**」と入力し、[**リモートデスクトップ接続**] をクリックします。

3. [ **コンピューター** ] フィールドに、接続先のコンピューターの名前を入力し、[ **接続**] をクリックします。 (コンピューター名の代わりに IP アドレスを入力することもできます)。

4. プロンプトが表示されたら、システムのローカル **管理者** アカウントの資格情報を入力します。

5. 次のようなダイアログボックスが表示されます。

    ![ローカル管理者アカウントとグループをセキュリティで保護する](media/Appendix-H--Securing-Local-Administrator-Accounts-and-Groups/SAD_114.png)
