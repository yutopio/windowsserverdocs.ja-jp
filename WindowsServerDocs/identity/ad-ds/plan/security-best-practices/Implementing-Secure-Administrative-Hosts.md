---
description: '詳細情報: セキュリティで保護された管理ホストの実装'
ms.assetid: eafdddc3-40d7-4a75-8f4f-a45294aabfc8
title: 安全な管理用のホストを実装する
author: iainfoulds
ms.author: daveba
manager: daveba
ms.date: 05/31/2017
ms.topic: article
ms.openlocfilehash: 52b152f376fb253ab6c924e577b096ac0733ebff
ms.sourcegitcommit: 65b6de6b44d41f1180c45db11cdd60cb2a093b46
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/10/2020
ms.locfileid: "97042550"
---
# <a name="implementing-secure-administrative-hosts"></a>安全な管理用のホストを実装する

>適用先:Windows Server 2016 では、Windows Server 2012 R2、Windows Server 2012

セキュリティで保護された管理ホストは、セキュリティで保護されたプラットフォームを作成するために特別に構成されたワークステーションまたはサーバーで、特権アカウントは、Active Directory またはドメインコントローラー、ドメインに参加しているシステム、およびドメインに参加しているシステムで実行されているアプリケーションで管理タスクを実行できます。 この場合、"特権アカウント" は、Active Directory 内の最も特権の高いグループのメンバーであるアカウントだけではなく、管理タスクの実行を許可する権限とアクセス許可を委任されたアカウントに限定されます。

これらのアカウントには、ドメイン内のほとんどのユーザーのパスワードをリセットできるヘルプデスクアカウント、DNS レコードとゾーンの管理に使用されるアカウント、または構成管理に使用されるアカウントがあります。 セキュリティで保護された管理ホストは管理機能専用であり、電子メールアプリケーション、web ブラウザー、Microsoft Office などの生産性ソフトウェアなどのソフトウェアは実行されません。

"最も特権の高い" アカウントとグループは、それに応じて最も厳密に保護されている必要がありますが、標準ユーザーアカウントの権限を持つアカウントやグループを保護する必要がなくなります。

セキュリティで保護された管理ホストは、管理タスク、リモートデスクトップゲートウェイサーバーの役割を実行し、接続先のホストの管理を実行するメンバーサーバー、または Hyper-v の役割を実行するサーバーによって管理タスクに使用される各 IT ユーザー用の一意の仮想マシンを提供する、専用のワークステーションにすることができます。 多くの環境では、3つのアプローチの組み合わせをすべて実装できます。

セキュリティで保護された管理ホストを実装するには、組織の規模、管理者の作業、リスクの選好度、予算と一貫性のある計画と構成が必要です。 セキュリティで保護された管理ホストを実装する際の考慮事項とオプションについては、組織に適した管理方法を開発する際に使用することをお勧めします。

## <a name="principles-for-creating-secure-administrative-hosts"></a>セキュリティで保護された管理ホストを作成するための原則
攻撃からシステムを効果的に保護するには、いくつかの一般的な原則を考慮する必要があります。

1.  信頼されたシステム (ドメインコントローラーなどのセキュリティで保護されたサーバー) は、信頼されていないホスト (つまり、管理対象のシステムと同じ程度にセキュリティで保護されていないワークステーション) からは管理しないでください。

2.  特権アクティビティを実行する場合、1つの認証要素に依存しないでください。つまり、ユーザー名とパスワードの組み合わせは、1つの要素 (既知のもの) だけが表示されるため、受け入れ可能な認証とは見なされません。 資格情報が生成され、キャッシュされるか、管理シナリオで格納されるかを検討する必要があります。

3.  現在の脅威における多くの攻撃では、マルウェアや悪意のあるハッキングを利用していますが、セキュリティで保護された管理ホストを設計および実装するときは、物理的なセキュリティを省略しないでください

### <a name="account-configuration"></a>アカウントの構成
現在、組織でスマートカードを使用していない場合でも、特権アカウントおよびセキュリティで保護された管理ホスト用に実装することを検討してください。 管理ホストは、管理ホストを含む Ou にリンクされている GPO の次の設定を変更することで、すべてのアカウントに対してスマートカードログオンを要求するように構成する必要があります。

**Computer Configuration\Policies\Windows] 権利セキュリティ Options\Interactive logon: スマートカードが必要**

この設定では、Active Directory の個々のアカウントの構成に関係なく、すべての対話型ログオンでスマートカードを使用する必要があります。

また、次のように構成できる、承認されたアカウントによるログオンのみを許可するように、セキュリティで保護された管理ホストを構成する必要があります。

**Computer Configuration\Policies\Windows] 権利セキュリティ] 権利の権限の割り当て**

これにより、セキュリティで保護された管理ホストの権限を持つユーザーにのみ、対話型 (および、適切なリモートデスクトップサービス) ログオン権限が付与されます。

### <a name="physical-security"></a>物理的なセキュリティ
管理ホストが信頼できると見なされるには、管理ホストが管理するシステムと同じ程度に構成および保護されている必要があります。 [ドメインコントローラーを攻撃から保護](../../../ad-ds/plan/security-best-practices/Securing-Domain-Controllers-Against-Attack.md)するために用意されているほとんどの推奨事項は、ドメインコントローラーおよび AD DS データベースの管理に使用されるホストにも適用できます。 ほとんどの環境でセキュリティで保護された管理システムを実装する際の課題の1つは、物理的なセキュリティを実装するのが困難な場合があります。これは、多くの場合、管理ユーザーのデスクトップなど、データセンターでホストされているサーバーほど安全ではない領域にコンピューターが存在するためです。

物理的なセキュリティには、管理ホストへの物理的なアクセスの制御が含まれます。 小規模な組織では、これは、使用されていないときにオフィスまたはデスクドロワーでロックされている専用の管理ワークステーションを維持することを意味します。 または、Active Directory またはドメインコントローラーの管理を実行する必要がある場合は、ドメインコントローラーに直接ログオンします。

中規模の組織では、オフィス内のセキュリティで保護された場所に配置され、Active Directory またはドメインコントローラーの管理が必要な場合に使用される、セキュリティで保護された管理 "ジャンプサーバー" を実装することを検討できます。 また、ジャンプサーバーの有無にかかわらず、使用していないときに安全な場所でロックされている管理ワークステーションを実装することもできます。

大規模な組織では、Active Directory に厳密に制御されたアクセスを提供するデータセンターに配置されたジャンプサーバーをデプロイできます。ドメインコントローラーおよびファイル、印刷、またはアプリケーションサーバー。 ジャンプサーバーアーキテクチャの実装には、大規模な環境でのセキュリティで保護されたワークステーションとサーバーの組み合わせが含まれる可能性が最も高くなります。

組織の規模や管理ホストの設計に関係なく、物理的なコンピューターを無許可のアクセスや盗難から保護する必要があります。また、BitLocker ドライブ暗号化を使用して、管理ホスト上のドライブを暗号化および保護する必要があります。 管理ホストに BitLocker を実装することで、ホストが盗まれた場合や、そのディスクが削除された場合でも、ドライブ上のデータに不正なユーザーがアクセスできないようにすることができます。

### <a name="operating-system-versions-and-configuration"></a>オペレーティングシステムのバージョンと構成
サーバーまたはワークステーションにかかわらず、すべての管理ホストは、このドキュメントで既に説明した理由により、組織内で使用されている最新のオペレーティングシステムを実行する必要があります。 現在のオペレーティングシステムを実行することで、管理スタッフは、新しいセキュリティ機能、ベンダーの完全なサポート、およびオペレーティングシステムで導入されたその他の機能の恩恵を受けることができます。 さらに、新しいオペレーティングシステムを評価するときに、最初に管理ホストに展開することによって、提供される新機能、設定、および管理メカニズムを理解する必要があります。これは、オペレーティングシステムのより広範な展開を計画するときに利用できます。 これにより、組織内の最も高度なユーザーは、新しいオペレーティングシステムに精通していて、それをサポートするための最適なユーザーにもなります。

### <a name="microsoft-security-configuration-wizard"></a>Microsoft セキュリティの構成ウィザード
ジャンプサーバーを管理ホスト戦略の一部として実装する場合は、組み込みのセキュリティ構成ウィザードを使用して、サービス、レジストリ、監査、およびファイアウォールの設定を構成し、サーバーの攻撃対象領域を減らす必要があります。 セキュリティ構成ウィザードの構成設定が収集および構成されている場合は、すべてのジャンプサーバーで一貫したベースライン構成を適用するために使用される GPO に設定を変換することができます。 さらに、この GPO を編集して、ジャンプサーバーに固有のセキュリティ設定を実装し、Microsoft セキュリティコンプライアンスマネージャーから抽出した追加の基準設定をすべての設定と組み合わせることができます。

### <a name="microsoft-security-compliance-manager"></a>Microsoft Security Compliance Manager
[Microsoft セキュリティコンプライアンスマネージャー](/previous-versions/tn-archive/cc677002(v=technet.10))は、オペレーティングシステムのバージョンと役割の構成に基づいて microsoft が推奨するセキュリティ構成を統合し、ドメインコントローラーのベースラインセキュリティ設定を作成および構成するために使用できる単一のツールと UI でそれらを収集する、無償で利用可能なツールです。 Microsoft セキュリティコンプライアンスマネージャーテンプレートをセキュリティ構成ウィザードの設定と組み合わせると、ジャンプサーバーが Active Directory に配置されている Ou で展開および適用されるジャンプサーバーの包括的な構成基準を作成できます。

> [!NOTE]
> このドキュメントの執筆時点では、Microsoft セキュリティコンプライアンスマネージャーには、ジャンプサーバーやその他のセキュリティで保護された管理ホストに固有の設定は含まれていませんが、セキュリティコンプライアンスマネージャー (SCM) を使用して、管理ホストの初期ベースラインを作成することができます。 ただし、ホストを適切にセキュリティで保護するには、高度にセキュリティ保護されたワークステーションとサーバーに適した追加のセキュリティ設定を適用する必要があります。

### <a name="applocker"></a>AppLocker
管理ホストと仮想マシンは、AppLocker またはサードパーティ製のアプリケーション制限ソフトウェアを使用して、スクリプト、ツール、およびアプリケーションを使用して構成する必要があります。 セキュリティで保護された設定に準拠していない管理アプリケーションまたはユーティリティは、セキュリティで保護された開発と管理の手法に準拠したツールにアップグレードする必要があります。 管理ホストで新しいまたは追加のツールが必要な場合は、アプリケーションとユーティリティを十分にテストする必要があります。また、ツールが管理ホストへの展開に適している場合は、システムに追加することができます。

### <a name="rdp-restrictions"></a>RDP の制限
特定の構成は管理システムのアーキテクチャによって異なりますが、リモートデスクトップゲートウェイ (RD ゲートウェイ) ジャンプサーバーを使用して、承認されたユーザーやシステムからドメインコントローラーやその他の管理システムへのアクセスを制御するなど、管理対象システムへのリモートデスクトッププロトコル (RDP) 接続を確立するために使用できるアカウントとコンピューターの制限を含める必要があります。

権限のあるユーザーによる対話型ログオンを許可する必要があります。また、サーバーへのアクセスに不要な他のログオンの種類を削除するか、ブロックする必要があります。

### <a name="patch-and-configuration-management"></a>パッチと構成の管理
小規模な組織では、Windows システムへの更新プログラムの展開を管理するために Windows Update や [Windows Server Update Services](/windows/deployment/deploy-whats-new) (WSUS) などのオファリングを使用する場合がありますが、大規模な組織では Microsoft Endpoint Configuration Manager などのエンタープライズ修正プログラムおよび構成管理ソフトウェアを実装する場合があります。 一般的なサーバーとワークステーションの作成に更新プログラムを展開するために使用するメカニズムに関係なく、ドメインコントローラー、証明機関、管理ホストなどの高度にセキュリティ保護されたシステムの展開を分離することを検討する必要があります。 これらのシステムを一般的な管理インフラストラクチャから分離することにより、管理ソフトウェアまたはサービスアカウントが侵害された場合に、インフラストラクチャ内のセキュリティで保護されたシステムに簡単に侵入することはできません。

セキュリティで保護されたシステムの手動更新プロセスは実装しないでくださいが、セキュリティで保護されたシステムを更新するための個別のインフラストラクチャを構成する必要があります。 非常に大規模な組織でも、このインフラストラクチャは通常、専用の WSUS サーバーとセキュリティで保護されたシステム用の Gpo を使用して実装できます。

### <a name="blocking-internet-access"></a>インターネットアクセスをブロックする
管理ホストは、インターネットへのアクセスを許可したり、組織のイントラネットを参照したりすることはできません。 Web ブラウザーと同様のアプリケーションは、管理ホストでは許可されません。 セキュリティで保護されたホストでは、境界ファイアウォール設定、WFAS 構成、および "ブラックホール" プロキシ構成の組み合わせを使用して、セキュリティで保護されたホストへのインターネットアクセスをブロックできます。 また、アプリケーション allowslist 使用して、web ブラウザーが管理ホストで使用されないようにすることもできます。

### <a name="virtualization"></a>仮想化
可能であれば、バーチャルマシンを管理ホストとして実装することを検討してください。 仮想化を使用すると、ユーザーごとに保存および管理された管理システムを作成できます。また、使用していないときに簡単にシャットダウンでき、資格情報が管理システム上でアクティブなままにならないようにすることができます。 また、各使用後に仮想管理ホストが初期スナップショットにリセットされるようにし、仮想マシンの不自然を維持するように要求することもできます。 管理ホストの仮想化に関するオプションの詳細については、次のセクションを参照してください。

## <a name="sample-approaches-to-implementing-secure-administrative-hosts"></a>セキュリティで保護された管理ホストを実装するためのサンプルアプローチ
管理ホストインフラストラクチャの設計方法と展開方法に関係なく、このトピックの「セキュリティで保護された管理ホストを作成するための原則」に記載されているガイドラインに留意する必要があります。 ここで説明する各方法では、IT スタッフが使用する "管理" システムと "生産性" システムを分離する方法に関する一般的な情報を提供します。 生産性向上システムは、IT 管理者が電子メールをチェックしたり、インターネットを閲覧したり、Microsoft Office などの一般的な生産性向上ソフトウェアを使用したりするために採用しているコンピューターです。 管理システムは、IT 環境の日常の管理に使用するように強化され、専用のコンピューターです。

セキュリティで保護された管理ホストを実装する最も簡単な方法は、IT スタッフに、管理タスクを実行できるセキュリティで保護されたワークステーションを提供することです。 ワークステーションのみの実装では、各管理ワークステーションを使用して、サーバーやその他のインフラストラクチャを管理するための管理ツールと RDP 接続を起動します。 ワークステーションのみの実装は、小規模な組織で有効にすることができますが、このトピックの後半にある「セキュリティで保護された管理ワークステーションとジャンプサーバーの実装」で説明されているように、専用の管理サーバーとワークステーションが使用されている管理ホスト用の分散設計では、より大規模で複雑なインフラストラクチャ

### <a name="implementing-separate-physical-workstations"></a>別個の物理ワークステーションの実装
管理ホストを実装する方法の1つは、各 IT ユーザーに2つのワークステーションを発行することです。 1台のワークステーションを "通常の" ユーザーアカウントと共に使用して、電子メールのチェックや生産性向上のためのアプリケーションの使用などのアクティビティを実行します。一方、2番目のワークステーションは専用の管理機能に限定されています。

生産性ワークステーションでは、セキュリティで保護されていないコンピューターにログオンするために特権アカウントを使用するのではなく、通常のユーザーアカウントを IT スタッフに付与することができます。 管理ワークステーションは、厳密に制御された構成を使用して構成する必要があります。 IT スタッフは、管理ワークステーションへのログオンに別のアカウントを使用する必要があります。

スマートカードを実装している場合は、スマートカードのログオンを要求するように管理ワークステーションを構成する必要があります。また、IT スタッフは、管理用に個別のアカウントを付与する必要があります。また、対話型ログオンにスマートカードを必要とするように構成されています。 前に説明したように管理ホストを強化する必要があります。また、管理用ワークステーションにローカルでログオンすることが許可されているユーザーのみを指定する必要があります。

#### <a name="pros"></a>長所
別々の物理システムを実装することで、各コンピューターがその役割に合わせて適切に構成され、IT ユーザーが誤って管理システムを危険にさらすことがないようにすることができます。

#### <a name="cons"></a>短所

-   個別の物理コンピューターを実装すると、ハードウェアコストが増加します。

-   リモートシステムの管理に使用される資格情報を使用して物理コンピューターにログオンすると、メモリ内に資格情報がキャッシュされます。

-   管理ワークステーションが安全に保管されていない場合は、物理ハードウェアキーロガーやその他の物理的な攻撃などのメカニズムによって侵害される可能性があります。

### <a name="implementing-a-secure-physical-workstation-with-a-virtualized-productivity-workstation"></a>仮想化された生産性ワークステーションを使用した安全な物理ワークステーションの実装
この方法では、IT ユーザーはセキュリティで保護された管理ワークステーションを使用して、日常の管理機能を実行できます。このワークステーションでは、リモートサーバー管理ツール (RSAT) を使用して、またはサーバーへの RDP 接続を責任の範囲内に使用します。 IT ユーザーが生産性タスクを実行する必要がある場合、仮想マシンとして実行されているリモートの生産性ワークステーションに RDP 経由で接続することができます。 ワークステーションごとに個別の資格情報を使用し、スマートカードなどのコントロールを実装する必要があります。

#### <a name="pros"></a>長所

-   管理ワークステーションと生産性ワークステーションは分離されています。

-   セキュリティで保護されたワークステーションを使用して生産性ワークステーションに接続する IT スタッフは、個別の資格情報とスマートカードを使用できます。また、特権のある資格情報は、安全性の低いコンピューターには格納されません。

#### <a name="cons"></a>短所

-   ソリューションを実装するには、設計と実装の作業と堅牢な仮想化オプションが必要です。

-   物理ワークステーションが安全に保管されていない場合は、ハードウェアまたはオペレーティングシステムを侵害し、通信の傍受を受けやすくする物理的な攻撃に対して脆弱になる可能性があります。

### <a name="implementing-a-single-secure-workstation-with-connections-to-separate-productivity-and-administrative-virtual-machines"></a>"生産性" と "管理" Virtual Machines を分離するための接続を備えた単一のセキュリティで保護されたワークステーションを実装する
この方法では、前に説明したとおりにロックダウンされ、ユーザーが特権アクセスを持っていない単一の物理ワークステーションをユーザーに発行できます。 専用サーバーでホストされている仮想マシンへのリモートデスクトップサービス接続を提供することで、電子メールなどの生産性の高いアプリケーションを実行する1つの仮想マシンと、ユーザーの専用管理ホストとして構成された2つ目の仮想マシンを IT スタッフに提供できます。

物理コンピューターへのログオンに使用するアカウントとは別のアカウントを使用して、仮想マシンに対してスマートカードまたはその他の多要素ログオンを要求する必要があります。 IT ユーザーは、物理コンピューターにログオンした後、生産性の高いスマートカードを使用してリモートの生産性コンピューターに接続し、別のアカウントとスマートカードを使用してリモート管理コンピューターに接続できます。

#### <a name="pros"></a>長所

-   IT ユーザーは1つの物理ワークステーションを使用できます。

-   仮想ホスト用に個別のアカウントを要求し、仮想マシンへのリモートデスクトップサービス接続を使用することにより、IT ユーザーの資格情報はローカルコンピューターのメモリにキャッシュされません。

-   物理ホストは、管理ホストと同じ程度に保護することができるため、ローカルコンピューターが危険にさらされる可能性が低くなります。

-   IT ユーザーの生産性仮想マシンまたはその管理仮想マシンが侵害された場合、仮想マシンを簡単に "正常な" 状態にリセットできます。

-   物理コンピューターのセキュリティが侵害された場合、特権のある資格情報はメモリにキャッシュされません。また、スマートカードを使用すると、キーストロークロガーによって資格情報が侵害されるのを防ぐことができます。

#### <a name="cons"></a>短所

-   ソリューションを実装するには、設計と実装の作業と堅牢な仮想化オプションが必要です。

-   物理ワークステーションが安全に保管されていない場合は、ハードウェアまたはオペレーティングシステムを侵害し、通信の傍受を受けやすくする物理的な攻撃に対して脆弱になる可能性があります。

### <a name="implementing-secure-administrative-workstations-and-jump-servers"></a>セキュリティで保護された管理ワークステーションとジャンプサーバーの実装
管理ワークステーションをセキュリティで保護する代わりに、セキュリティで保護されたジャンプサーバーを実装することもできます。また、管理ユーザーは RDP とスマートカードを使用してジャンプサーバーに接続し、管理タスクを実行できます。

ジャンプサーバーとそのサーバーから管理される対象サーバーへの接続に制限を実装できるように、リモートデスクトップゲートウェイの役割を実行するようにジャンプサーバーを構成する必要があります。 可能であれば、Hyper-v の役割をインストールし、 [個人用仮想デスクトップ](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd759174(v=ws.11)) またはその他のユーザーごとの仮想マシンを作成して、管理ユーザーがジャンプサーバーでのタスクに使用できるようにする必要もあります。

ユーザーごとの管理ユーザーのバーチャルマシンにジャンプサーバーを提供することで、管理ワークステーションに物理的なセキュリティを提供し、管理ユーザーは使用していないときにバーチャルマシンをリセットまたはシャットダウンできます。 Hyper-v の役割とリモートデスクトップゲートウェイの役割を同じ管理ホストにインストールしない場合は、別のコンピューターにインストールすることができます。

サーバーの管理には、可能な限りリモート管理ツールを使用する必要があります。 リモートサーバー管理ツール (RSAT) 機能は、ユーザーの仮想マシン (または、管理用のユーザーごとの仮想マシンを実装していない場合はジャンプサーバー) にインストールする必要があります。管理スタッフは、管理タスクを実行するために RDP 経由で仮想マシンに接続する必要があります。

管理ユーザーが RDP 経由で移行先サーバーに接続して直接管理する必要がある場合は、適切なユーザーとコンピューターが移行先サーバーへの接続を確立するために使用されている場合にのみ接続を許可するように RD ゲートウェイを構成する必要があります。 RSAT (または同様の) ツールの実行は、管理システムが指定されていないシステム (一般的に使用されているワークステーションやジャンプサーバーではないメンバーサーバーなど) では禁止されている必要があります。

#### <a name="pros"></a>長所

-   ジャンプサーバーを作成すると、特定のサーバーを、ネットワーク内の "ゾーン" (類似した構成、接続、およびセキュリティ要件を持つシステムのコレクション) にマップし、セキュリティで保護された管理ホストから指定された "ゾーン" サーバーに接続する管理スタッフが各ゾーンの管理を実現するようにすることができます。

-   ジャンプサーバーをゾーンにマップすることによって、接続プロパティと構成要件の詳細な制御を実装できます。また、承認されていないシステムからの接続試行を簡単に識別できます。

-   ジャンプサーバーに管理者ごとの仮想マシンを実装することで、管理タスクが完了したときに、仮想マシンを既知のクリーンな状態に強制的にシャットダウンおよびリセットすることができます。 管理タスクが完了したときに仮想マシンのシャットダウン (または再起動) を強制することによって、仮想マシンを攻撃者が対象にすることはできません。また、メモリキャッシュされた資格情報は再起動後も保持されないため、資格情報の盗難攻撃を受けることはできません。

#### <a name="cons"></a>短所

-   ジャンプサーバーには、物理または仮想のいずれでも専用サーバーが必要です。

-   指定したジャンプサーバーと管理ワークステーションを実装するには、環境内で構成されているすべてのセキュリティゾーンにマップする慎重な計画と構成が必要です。

