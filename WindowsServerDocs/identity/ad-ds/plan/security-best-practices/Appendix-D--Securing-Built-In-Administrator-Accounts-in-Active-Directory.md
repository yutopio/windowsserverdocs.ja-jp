---
description: '詳細については、「付録 D: Active Directory で Built-In 管理者アカウントを保護する」を参照してください。'
ms.assetid: 11f36f2b-9981-4da0-9e7c-4eca78035f37
title: 付録 D-Active Directory での Built-In 管理者アカウントのセキュリティ保護
author: iainfoulds
ms.author: daveba
manager: daveba
ms.date: 05/31/2017
ms.topic: article
ms.openlocfilehash: 2d6a8a626c5fbf2a8d34a1527b3eb9976c21ebd0
ms.sourcegitcommit: 65b6de6b44d41f1180c45db11cdd60cb2a093b46
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/10/2020
ms.locfileid: "97041720"
---
# <a name="appendix-d-securing-built-in-administrator-accounts-in-active-directory"></a>付録 D: Active Directory の組み込み管理者アカウントをセキュリティで保護する

>適用先:Windows Server 2016 では、Windows Server 2012 R2、Windows Server 2012


## <a name="appendix-d-securing-built-in-administrator-accounts-in-active-directory"></a>付録 D: Active Directory の組み込み管理者アカウントをセキュリティで保護する
Active Directory の各ドメインで、ドメインの作成の一環として管理者アカウントが作成されます。 このアカウントは、既定でドメインの domain Admins グループと Administrators グループのメンバーであり、ドメインがフォレストのルートドメインである場合、そのアカウントは Enterprise Admins グループのメンバーでもあります。

ドメインの管理者アカウントの使用は、最初のビルドアクティビティと、場合によってはディザスターリカバリーシナリオでのみ予約する必要があります。 他のアカウントを使用できない場合に、管理者アカウントを使用して修復を実行できるようにするには、フォレスト内の任意のドメインで管理者アカウントの既定のメンバーシップを変更しないようにする必要があります。 代わりに、次のセクションで説明するように、フォレスト内の各ドメインの管理者アカウントをセキュリティで保護する必要があります。詳細な手順については、次の手順で詳しく説明します。

> [!NOTE]
> このガイドは、アカウントの無効化を推奨するために使用されます。 フォレストの回復に関するホワイトペーパーでは、既定の管理者アカウントを使用しているため、これは削除されました。 これは、グローバルカタログサーバーを使用せずにログオンを許可する唯一のアカウントであるためです。


#### <a name="controls-for-built-in-administrator-accounts"></a>組み込みの Administrator アカウントのコントロール
フォレスト内の各ドメインに組み込まれている管理者アカウントについては、次の設定を構成する必要があります。

-   アカウントの [ **アカウントは重要なので委任できない** ] フラグを有効にします。

-   アカウントで **対話型ログオンフラグを** 使用するには、[スマートカードを有効にする] が必要です。

-   ドメインに参加しているシステムで管理者アカウントの使用を制限するように Gpo を構成する:

    -   1つまたは複数の Gpo を作成し、各ドメインのワークステーションとメンバーサーバーの Ou にリンクする場合は、各ドメインの管理者アカウントを、 **Computer Configuration\Policies\Windows] 権利**\ ユーザー権利の割り当ての次のユーザー権利に追加します。

        -   ネットワークからこのコンピューターへのアクセスを拒否

        -   バッチ ジョブとしてのログオン権限を拒否する

        -   サービスとしてのログオン権限を拒否する

        -   リモート デスクトップ サービスを使ったログオンを拒否

> [!NOTE]
> この設定にアカウントを追加する場合は、ローカル管理者アカウントとドメイン管理者アカウントのどちらを構成するかを指定する必要があります。 たとえば、これらの拒否権限に NWTRADERS ドメインの管理者アカウントを追加するには、アカウントを NWTRADERS\Administrator として入力するか、NWTRADERS ドメインの管理者アカウントを参照する必要があります。 グループポリシーオブジェクトエディターのこれらのユーザー権利設定で「Administrator」と入力すると、GPO が適用される各コンピューターのローカル管理者アカウントが制限されます。
>
> メンバーサーバーとワークステーションのローカル管理者アカウントは、ドメインベースの管理者アカウントと同じ方法で制限することをお勧めします。 そのため、通常は、フォレスト内の各ドメインの管理者アカウントと、ローカルコンピューターの管理者アカウントをこれらのユーザー権利設定に追加する必要があります。 次のスクリーンショットは、ローカル管理者アカウントをブロックし、ドメインの管理者アカウントがこれらのアカウントに必要ではないログオンを実行できないようにするために、これらのユーザー権限を構成する例を示しています。


![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_23.gif)

-   ドメインコントローラーの管理者アカウントを制限するように Gpo を構成する
    -   フォレスト内の各ドメインにおいて、既定のドメインコントローラー GPO またはドメインコントローラー OU にリンクされているポリシーを変更して、各ドメインの管理者アカウントを、 **Computer Configuration\Policies\Windows] 権利**\ ユーザー権利の割り当ての次のユーザー権利に追加する必要があります。
        -   ネットワークからこのコンピューターへのアクセスを拒否

        -   バッチ ジョブとしてのログオン権限を拒否する

        -   サービスとしてのログオン権限を拒否する

        -   リモート デスクトップ サービスを使ったログオンを拒否

> [!NOTE]
> これらの設定により、ドメインの組み込みの Administrator アカウントを使用してドメインコントローラーに接続することはできません。ただし、有効にした場合、アカウントはドメインコントローラーにローカルでログオンできます。 このアカウントは、ディザスターリカバリーシナリオでのみ有効にして使用する必要があるため、少なくとも1つのドメインコントローラーへの物理的なアクセスが可能であること、またはドメインコントローラーへのアクセス許可を持つ他のアカウントをリモートで使用できることが予想されます。

-   管理者アカウントの監査を構成する

    各ドメインの管理者アカウントをセキュリティで保護し、無効にした場合は、アカウントの変更を監視するように監査を構成する必要があります。 アカウントが有効になっている場合、パスワードがリセットされた場合、またはアカウントにその他の変更が加えられた場合は、組織内のインシデント対応チームに加えて、Active Directory の管理を担当するユーザーまたはチームに警告を送信する必要があります。

#### <a name="step-by-step-instructions-to-secure-built-in-administrator-accounts-in-active-directory"></a>Active Directory でビルトイン Administrator アカウントをセキュリティで保護するための詳細な手順

1.  **サーバーマネージャー** で、[**ツール**] をクリックし、[ **Active Directory ユーザーとコンピューター**] をクリックします。

2.  委任を利用して他のシステムでアカウントの資格情報を使用する攻撃を防ぐには、次の手順を実行します。

    1.  **管理者** アカウントを右クリックし、[**プロパティ**] をクリックします。

    2.  **[アカウント]** タブをクリックします。

    3.  次のスクリーンショットに示されているように、[ **アカウントオプション**] で [ **アカウントは重要なので委任できない** ] フラグを選択し、[ **OK]** をクリックします。

        ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_24.gif)

3.  アカウントの **対話型ログオンフラグにスマートカードが必要な** 場合は、次の手順を実行します。

    1.  **管理者** アカウントを右クリックし、[**プロパティ**] を選択します。

    2.  **[アカウント]** タブをクリックします。

    3.  [ **アカウント** オプション] で、次のスクリーンショットに示されているように、[ **対話型ログオンフラグにはスマートカードが必要** ] を選択し、[ **OK]** をクリックします。

        ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_25.gif)

##### <a name="configuring-gpos-to-restrict-administrator-accounts-at-the-domain-level"></a>Domain-Level で管理者アカウントを制限するように Gpo を構成する

> [!WARNING]
> この GPO は、組み込みの管理者アカウントを使用できなくなる可能性があるため、ドメインレベルでリンクしないでください。ディザスターリカバリーのシナリオでも同様です。

1.  **サーバーマネージャー** で、[**ツール**] をクリックし、[**グループポリシーの管理**] をクリックします。

2.  コンソールツリーで、 <Forest> [\ ドメイン] を展開し、 \\ <Domain> **グループポリシーオブジェクト**(は <Forest> フォレストの名前、 <Domain> はグループポリシーを作成するドメインの名前です) を選択します。

3.  コンソールツリーで、[ **グループポリシーオブジェクト**] を右クリックし、[ **新規**] をクリックします。

    ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_27.gif)

4.  [ **新しい gpo** ] ダイアログボックスで、 <GPO Name> 次のスクリーンショットに示されているように「」と入力し、[ **OK** ] ( <GPO Name> はこの GPO の名前) をクリックします。

    ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_28.gif)

5.  詳細ペインで <GPO Name> 、を右クリックし、[ **編集**] をクリックします。

6.  [ **Computer Configuration\Policies\Windows**] [] 権利] [ポリシー] に移動し、[ **ユーザー権利の割り当て**] をクリックします。

    ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_29.gif)

7.  次の手順を実行して、管理者アカウントがネットワーク経由でメンバーサーバーおよびワークステーションにアクセスするのを防ぐために、ユーザー権限を構成します。

    1.  [ **ネットワークからこのコンピューターへのアクセスを拒否する** ] をダブルクリックし、[ **これらのポリシー設定を定義** する] を選択します。

    2.  [ **ユーザーまたはグループの追加** ] をクリックし、[ **参照**] をクリックします。

    3.  「 **Administrator**」と入力し、[ **名前の確認**] をクリックして、[ **OK**] をクリックします。 <DomainName>次のスクリーンショットに示すように、アカウントが \ ユーザー名の形式で表示されていることを確認します。

        ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_30.gif)

    4.  [ **Ok**] をクリックし、もう一度 [ **ok]** をクリックします。

8.  次の手順に従って、管理者アカウントが batch ジョブとしてログオンするのを防ぐために、ユーザー権限を構成します。

    1.  [ **バッチジョブとしてログオンを拒否する** ] をダブルクリックし、[ **これらのポリシー設定を定義** する] を選択します。

    2.  [ **ユーザーまたはグループの追加** ] をクリックし、[ **参照**] をクリックします。

    3.  「 **Administrator**」と入力し、[ **名前の確認**] をクリックして、[ **OK**] をクリックします。 <DomainName>次のスクリーンショットに示すように、アカウントが \ ユーザー名の形式で表示されていることを確認します。

        ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_31.gif)

    4.  [ **Ok**] をクリックし、もう一度 [ **ok]** をクリックします。

9. 次の手順を実行して、管理者アカウントがサービスとしてログオンするのを防ぐために、ユーザー権限を構成します。

    1.  [ **サービスとしてログオンを拒否する** ] をダブルクリックし、[ **これらのポリシー設定を定義** する] を選択します。

    2.  [ **ユーザーまたはグループの追加** ] をクリックし、[ **参照**] をクリックします。

    3.  「 **Administrator**」と入力し、[ **名前の確認**] をクリックして、[ **OK**] をクリックします。 <DomainName>次のスクリーンショットに示すように、アカウントが \ ユーザー名の形式で表示されていることを確認します。

        ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_32.gif)

    4.  [ **Ok**] をクリックし、もう一度 [ **ok]** をクリックします。

10. 次の手順を実行して、BA アカウントがリモートデスクトップサービス経由でメンバーサーバーおよびワークステーションにアクセスするのを防ぐために、ユーザーの権限を構成します。

    1.  [ **リモートデスクトップサービスのログオンを拒否** する] をダブルクリックし、[ **これらのポリシーの設定を定義** する] を選択します。

    2.  [ **ユーザーまたはグループの追加** ] をクリックし、[ **参照**] をクリックします。

    3.  「 **Administrator**」と入力し、[ **名前の確認**] をクリックして、[ **OK**] をクリックします。 <DomainName>次のスクリーンショットに示すように、アカウントが \ ユーザー名の形式で表示されていることを確認します。

        ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_33.gif)

    4.  [ **Ok**] をクリックし、もう一度 [ **ok]** をクリックします。

11. **グループポリシー管理エディター** を終了するには、[**ファイル**] をクリックし、[**終了**] をクリックします。

12. **グループポリシー管理** で、次の手順に従って、GPO をメンバーサーバーとワークステーションの ou にリンクします。

    1.  <Forest>\ Domains \\ <Domain> ( <Forest> はフォレストの名前、 <Domain> はグループポリシーを設定するドメインの名前) の順に移動します。

    2.  GPO が適用される OU を右クリックし、[既存の **gpo のリンク**] をクリックします。

        ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_34.gif)

    3.  作成した GPO を選択し、[ **OK]** をクリックします。

        ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_35.gif)

    4.  ワークステーションが含まれている他のすべての Ou へのリンクを作成します。

    5.  メンバーサーバーを含む他のすべての Ou へのリンクを作成します。

> [!IMPORTANT]
> これらの設定に管理者アカウントを追加するときに、アカウントのラベル付け方法によってローカル管理者アカウントとドメイン管理者アカウントのどちらを構成するかを指定します。 たとえば、TAILSPINTOYS ドメインの管理者アカウントをこれらの拒否権限に追加するには、TAILSPINTOYS ドメインの管理者アカウントを参照します。これは TAILSPINTOYS\Administrator. と表示されます。 グループポリシーオブジェクトエディターのこれらのユーザー権利設定で「Administrator」と入力した場合は、前述のように、GPO が適用される各コンピューターのローカル管理者アカウントを制限します。

#### <a name="verification-steps"></a>検証手順
ここで説明する検証手順は、Windows 8 および Windows Server 2012 に固有のものです。

##### <a name="verify-smart-card-is-required-for-interactive-logon-account-option"></a>"対話型ログオンにはスマートカードが必要です" アカウントオプションを確認します。

1.  GPO の変更の影響を受けたメンバーサーバーまたはワークステーションから、ドメインの組み込みの Administrator アカウントを使用して、ドメインに対話形式でログオンしようとします。 ログオンしようとすると、次のようなダイアログボックスが表示されます。

![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_36.gif)

##### <a name="verify-account-is-disabled-account-option"></a>アカウントが無効になっていることを確認する

1.  GPO の変更の影響を受けたメンバーサーバーまたはワークステーションから、ドメインの組み込みの Administrator アカウントを使用して、ドメインに対話形式でログオンしようとします。 ログオンしようとすると、次のようなダイアログボックスが表示されます。

![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_37.gif)

##### <a name="verify-deny-access-to-this-computer-from-the-network-gpo-settings"></a>[ネットワークからこのコンピューターへのアクセスを拒否する] GPO 設定を確認する
GPO の変更の影響を受けないメンバーサーバーまたはワークステーション (ジャンプサーバーなど) から、GPO の変更の影響を受けるネットワーク経由でメンバーサーバーまたはワークステーションへのアクセスを試みます。 GPO 設定を確認するには、次の手順を実行して、 **NET use** コマンドを使用してシステムドライブをマップします。

1.  ドメインの組み込みの Administrator アカウントを使用して、ドメインにログオンします。

2.  マウスを使用して、画面の右上隅または右下隅にポインターを移動します。 **Charms** バーが表示されたら、[**検索**] をクリックします。

3.  **検索** ボックスに「**コマンドプロンプト**」と入力し、[**コマンドプロンプト**] を右クリックします。次に、[**管理者として実行**] をクリックして、管理者特権でのコマンドプロンプトを開きます。

4.  昇格の承認を求めるメッセージが表示されたら、[ **はい]** をクリックします。

    ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_38.gif)

5.  **コマンドプロンプト** ウィンドウで、「 **net use \\ \\ \<Server Name\> \c $**」と入力します。ここで、 \<Server Name\> は、ネットワーク経由でアクセスしようとしているメンバーサーバーまたはワークステーションの名前です。

6.  次のスクリーンショットは、表示する必要があるエラーメッセージを示しています。

    ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_39.gif)

##### <a name="verify-deny-log-on-as-a-batch-job-gpo-settings"></a>"バッチジョブとしてログオンを拒否する" GPO 設定を確認する

GPO の変更の影響を受けたメンバーサーバーまたはワークステーションから、ローカルにログオンします。

###### <a name="create-a-batch-file"></a>バッチファイルを作成する

1.  マウスを使用して、画面の右上隅または右下隅にポインターを移動します。 **Charms** バーが表示されたら、[**検索**] をクリックします。

2.  **検索** ボックスに「 **notepad**」と入力し、[ **notepad**] をクリックします。

3.  **メモ帳** で、「 **dir c:**」と入力します。

4.  [ **ファイル** ]、[名前を付け **て保存**] の順にクリックします。

5.  [**ファイル名**] ボックスに「 **<Filename> .bat** 」と入力します (ここで、 <Filename> は新しいバッチファイルの名前です)。

###### <a name="schedule-a-task"></a>タスクのスケジュール設定

1.  マウスを使用して、画面の右上隅または右下隅にポインターを移動します。 **Charms** バーが表示されたら、[**検索**] をクリックします。

2.  **検索** ボックスに「 **task scheduler**」と入力し、[**タスクスケジューラ**] をクリックします。

    > [!NOTE]
    > Windows 8 を実行しているコンピューターの場合は、[検索] ボックスに「 **スケジュールタスク**」と入力し、[ **タスクのスケジュール**] をクリックします。

3.  **タスクスケジューラ** で、[**アクション**] をクリックし、[**タスクの作成**] をクリックします。

4.  [ **タスクの作成** ] ダイアログボックスで、「」と入力し **<Task Name>** ます (ここで、 **<Task Name>** は新しいタスクの名前です)。

5.  [ **操作** ] タブをクリックし、[ **新規作成**] をクリックします。

6.  [ **アクション:**] で、[ **プログラムの開始**] を選択します。

7.  [ **プログラム/スクリプト:**] の [ **参照**] をクリックし、[バッチファイルの作成] セクションで作成したバッチファイルを探して選択し、[ **開く**] をクリックします。

8.  **[OK]** をクリックします。

9. **[General]** タブをクリックします。

10. [ **セキュリティ** オプション] の [ **ユーザーまたはグループの変更**] をクリックします。

11. ドメインレベルで BA アカウントの名前を入力し、[名前の **確認**] をクリックして、[ **OK**] をクリックします。

12. [ **ユーザーがログオンしているかどうかにかかわら** ず、 **パスワードを保存** しない] を選択します。 タスクは、ローカルコンピューターのリソースにのみアクセスできます。

13. **[OK]** をクリックします。

14. タスクを実行するためのユーザーアカウントの資格情報を要求するダイアログボックスが表示されます。

15. 資格情報を入力したら、[ **OK]** をクリックします。

16. 次のようなダイアログボックスが表示されます。

    ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_40.gif)

##### <a name="verify-deny-log-on-as-a-service-gpo-settings"></a>"サービスとしてログオンを拒否する" GPO 設定を確認する

1.  GPO の変更の影響を受けたメンバーサーバーまたはワークステーションから、ローカルにログオンします。

2.  マウスを使用して、画面の右上隅または右下隅にポインターを移動します。 **Charms** バーが表示されたら、[**検索**] をクリックします。

3.  **検索** ボックスに「**サービス**」と入力し、[**サービス**] をクリックします。

4.  [ **印刷スプーラ**] を見つけてダブルクリックします。

5.  **[ログオン]** タブをクリックします。

6.  [ **次の** アカウントでログオン] で、 **このアカウント** を選択します。

7.  [ **参照**] をクリックして、ドメインレベルで BA アカウントの名前を入力し、[ **名前の確認**] をクリックして、[ **OK**] をクリックします。

8.  [ **パスワード:** ] と [ **パスワードの確認** 入力] の下に管理者アカウントのパスワードを入力し、[ **OK]** をクリックします。

9. [ **OK]** を3回クリックします。

10. **印刷スプーラサービス** を右クリックし、[**再起動**] を選択します。

11. サービスを再起動すると、次のようなダイアログボックスが表示されます。

    ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_41.gif)

##### <a name="revert-changes-to-the-printer-spooler-service"></a>プリンタスプーラサービスへの変更を元に戻す

1.  GPO の変更の影響を受けたメンバーサーバーまたはワークステーションから、ローカルにログオンします。

2.  マウスを使用して、画面の右上隅または右下隅にポインターを移動します。 **Charms** バーが表示されたら、[**検索**] をクリックします。

3.  **検索** ボックスに「**サービス**」と入力し、[**サービス**] をクリックします。

4.  [ **印刷スプーラ**] を見つけてダブルクリックします。

5.  **[ログオン]** タブをクリックします。

6.  [ **ログオン方法**] で、[ **ローカルシステム** ] アカウントを選択し、[ **OK]** をクリックします。

##### <a name="verify-deny-log-on-through-remote-desktop-services-gpo-settings"></a>GPO 設定の [リモートデスクトップサービスのログオンを拒否する] を確認します。

1.  マウスを使用して、画面の右上隅または右下隅にポインターを移動します。 **Charms** バーが表示されたら、[**検索**] をクリックします。

2.  **検索** ボックスに「**リモートデスクトップ接続**」と入力し、[**リモートデスクトップ接続**] をクリックします。

3.  [ **コンピューター** ] フィールドに、接続先のコンピューターの名前を入力し、[ **接続**] をクリックします。 (コンピューター名の代わりに IP アドレスを入力することもできます)。

4.  メッセージが表示されたら、ドメインレベルで BA アカウントの名前の資格情報を入力します。

5.  次のようなダイアログボックスが表示されます。

    ![組み込みの管理者アカウントのセキュリティ保護](media/Appendix-D--Securing-Built-In-Administrator-Accounts-in-Active-Directory/SAD_42.gif)
