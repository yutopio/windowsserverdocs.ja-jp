---
title: wbadmin enable backup
description: Wbadmin enable backup コマンドの参照記事。これにより、毎日のバックアップスケジュールを作成して有効にしたり、既存のバックアップスケジュールを変更したりできます。
ms.topic: reference
ms.assetid: c0e57f8a-70fa-4c60-9754-e762e8ad8772
ms.author: lizross
author: eross-msft
manager: mtillman
ms.date: 10/16/2017
ms.openlocfilehash: 3135df39135a1d085509bdbdabdfa7f88817c3be
ms.sourcegitcommit: f45640cf4fda621b71593c63517cfdb983d1dc6a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/17/2020
ms.locfileid: "92156064"
---
# <a name="wbadmin-enable-backup"></a>wbadmin enable backup

毎日のバックアップスケジュールを作成して有効にするか、既存のバックアップスケジュールを変更します。 パラメーターを指定しない場合は、現在スケジュールされているバックアップの設定が表示されます。

このコマンドを使用して毎日のバックアップスケジュールを構成または変更するには、 **Backup Operators** グループまたは **Administrators** グループのメンバーである必要があります。 さらに、**コマンドプロンプト**を右クリックし、[**管理者として実行**] を選択して、管理者特権でのコマンドプロンプトから**wbadmin**を実行する必要があります。

ディスクのディスク id 値を表示するには、 [wbadmin get disks](wbadmin-get-disks.md) コマンドを実行します。

## <a name="syntax"></a>構文

```
wbadmin enable backup [-addtarget:<BackupTarget>] [-removetarget:<BackupTarget>] [-schedule:<TimeToRunBackup>] [-include:<VolumesToInclude>] [-nonRecurseInclude:<ItemsToInclude>] [-exclude:<ItemsToExclude>] [-nonRecurseExclude:<ItemsToExclude>][-systemState] [-hyperv:<HyperVComponentsToExclude>] [-allCritical] [-systemState] [-vssFull | -vssCopy] [-user:<UserName>] [-password:<Password>] [-allowDeleteOldBackups]  [-quiet]
```

### <a name="parameters"></a>パラメーター

| パラメーター | 説明 |
|--|--|
| -addtarget | バックアップのストレージの場所を指定します。 リモート共有フォルダー () へのディスク、ボリューム、または UNC (汎用名前付け規則) パスとして場所を指定する必要があり `\\<servername>\<sharename>` ます。 既定では、バックアップはに保存され `\\<servername>\<sharename> WindowsImageBackup <ComputerBackedUp>` ます。 ディスクを指定すると、使用前にディスクがフォーマットされ、そのディスク上の既存のデータが完全に消去されます。 共有フォルダーを指定した場合、他の場所を追加することはできません。 共有フォルダーは、一度に1つのストレージの場所としてのみ指定できます。<p>**重要:** バックアップをリモート共有フォルダーに保存した場合、同じフォルダーを使用して同じコンピューターを再度バックアップすると、そのバックアップは上書きされます。 また、バックアップ操作が失敗した場合は、古いバックアップが上書きされますが、新しいバックアップは使用できないため、バックアップが存在しない可能性があります。 これを回避するには、リモート共有フォルダーにサブフォルダーを作成してバックアップを整理します。 これを行う場合、サブフォルダーには親フォルダーの2倍の領域が必要です。<p>1つのコマンドで指定できる場所は1つだけです。 コマンドを再実行して、複数のボリュームおよびディスクバックアップの記憶域の場所を追加できます。 |
| -removetarget | 既存のバックアップスケジュールから削除する記憶域の場所を指定します。 ディスク識別子として場所を指定する必要があります。 |
| -スケジュール | バックアップを作成する時刻を HH: MM およびコンマ区切りの形式で指定します。 |
| -含める | バックアップに含める項目のコンマ区切りの一覧を指定します。 複数のファイル、フォルダー、またはボリュームを含めることができます。 ボリュームパスは、ボリュームドライブ文字、ボリュームマウントポイント、または GUID ベースのボリューム名を使用して指定できます。 GUID ベースのボリューム名を使用する場合は、末尾に円記号 () を使用する必要があり `\` ます。 ファイル `*` へのパスを指定する場合は、ファイル名にワイルドカード文字 () を使用できます。 |
| -nonRecurseInclude | バックアップに含める項目の、非再帰的でコンマ区切りのリストを指定します。 複数のファイル、フォルダー、またはボリュームを含めることができます。 ボリュームパスは、ボリュームドライブ文字、ボリュームマウントポイント、または GUID ベースのボリューム名を使用して指定できます。 GUID ベースのボリューム名を使用する場合は、末尾に円記号 () を使用する必要があり `\` ます。 ファイル `*` へのパスを指定する場合は、ファイル名にワイルドカード文字 () を使用できます。 **-BackupTarget**パラメーターが使用されている場合にのみ使用してください。 |
| -除外 | バックアップから除外する項目のコンマ区切りのリストを指定します。 ファイル、フォルダー、またはボリュームを除外することができます。 ボリュームパスは、ボリュームドライブ文字、ボリュームマウントポイント、または GUID ベースのボリューム名を使用して指定できます。 GUID ベースのボリューム名を使用する場合は、末尾に円記号 () を使用する必要があり `\` ます。 ファイル `*` へのパスを指定する場合は、ファイル名にワイルドカード文字 () を使用できます。 |
| -nonRecurseExclude | バックアップから除外する、非再帰的でコンマ区切りのリストを指定します。 ファイル、フォルダー、またはボリュームを除外することができます。 ボリュームパスは、ボリュームドライブ文字、ボリュームマウントポイント、または GUID ベースのボリューム名を使用して指定できます。 GUID ベースのボリューム名を使用する場合は、末尾に円記号 () を使用する必要があり `\` ます。 ファイル `*` へのパスを指定する場合は、ファイル名にワイルドカード文字 () を使用できます。 |
| -hyperv | バックアップに含めるコンポーネントのコンマ区切りの一覧を指定します。 識別子には、コンポーネント名またはコンポーネント GUID (中かっこの有無を含む) を指定できます。 |
| -systemState | **-Include**パラメーターで指定した他の項目に加えて、システム状態を含むバックアップを作成します。 システム状態には、ブートファイル (Boot.ini、NDTLDR、NTDetect.com) が含まれています。これには、COM 設定、SYSVOL (グループポリシーとログオンスクリプト)、Active Directory と NTDS が含まれます。ドメインコントローラー上の DIT、および証明書サービスがインストールされている場合は、証明書ストア。 サーバーに Web サーバーの役割がインストールされている場合は、IIS メタディレクトリが含まれます。 サーバーがクラスターの一部である場合は、クラスターサービス情報も含まれます。 |
| -allCritical | すべての重要なボリューム (オペレーティングシステムの状態を含むボリューム) をバックアップに含めることを指定します。 このパラメーターは、完全なシステムまたはシステム状態の回復用のバックアップを作成する場合に便利です。 **-BackupTarget**が指定されている場合にのみ使用してください。それ以外の場合、コマンドは失敗します。 は、 **-include** オプションと共に使用できます。<p>**ヒント:** 重要なボリュームのバックアップのターゲットボリュームはローカルドライブにすることができますが、バックアップに含まれているボリュームを使用することはできません。 |
| -vssFull | ボリュームシャドウコピーサービス (VSS) を使用して完全バックアップを実行します。 すべてのファイルがバックアップされ、各ファイルの履歴がバックアップされたことを反映して更新され、以前のバックアップのログが切り捨てられる可能性があります。 このパラメーターを使用しない場合、 [wbadmin start backup](wbadmin-start-backup.md) コマンドによってコピーバックアップが作成されますが、バックアップされているファイルの履歴は更新されません。<p>**注意:** 現在のバックアップに含まれるボリューム上のアプリをバックアップするために Windows Server バックアップ以外の製品を使用している場合は、このパラメーターを使用しないでください。 これにより、他のバックアップ製品が作成している増分バックアップ、差分バックアップ、その他の種類のバックアップが壊れる可能性があります。これは、バックアップするデータの量を判断するために依存している履歴があるため、不要な完全バックアップを実行する可能性があるためです。 |
| -vssCopy | VSS を使用してコピーバックアップを実行します。 すべてのファイルがバックアップされますが、バックアップするファイルの履歴は更新されないため、変更や削除などのファイル、およびアプリケーションログファイルに関するすべての情報が保持されます。 この種類のバックアップを使用しても、このコピーバックアップとは独立して発生する可能性のある増分バックアップと差分バックアップのシーケンスには影響しません。 これが既定値です。<p>**警告:** バックアップコピーは、増分バックアップまたは差分バックアップや復元には使用できません。 |
| -ユーザー | バックアップストレージの保存先に対する書き込みアクセス許可を持つユーザーを指定します (リモート共有フォルダーの場合)。 ユーザーは、バックアップを取得するコンピューターの **Administrators** グループまたは **Backup Operators** グループのメンバーである必要があります。 |
| -パスワード | パラメーター **-user**によって指定されたユーザー名のパスワードを指定します。 |
| -allowDeleteOldBackups | コンピューターをアップグレードする前に行われたすべてのバックアップを上書きします。 |
| -quiet | ユーザーにプロンプトを表示せずにコマンドを実行します。 |

## <a name="examples"></a>使用例

ハードディスクドライブ E:、D:\mountpoint、およびに対して毎日のバックアップを 9:00 AM と 6:00 PM にスケジュール `\\?\Volume{cc566d14-44a0-11d9-9d93-806e6f6e6963}\` し、DiskID という名前のディスクにファイルを保存するには、次のように入力します。

```
wbadmin enable backup -addtarget:DiskID -schedule:09:00,18:00 -include:E:,D:\mountpoint,\\?\Volume{cc566d14-44a0-11d9-9d93-806e6f6e6963}\
```

12:00 AM と 7:00 PM の D:\documents フォルダーの毎日のバックアップをネットワーク上の場所にスケジュールするには、 `\\backupshare\backup1` **バックアップオペレーター**のネットワーク資格情報を使用します。 aaren (aekel) は、パスワードは *$ 3hm9 ^ 5lp* で、ユーザーはネットワーク共有へのアクセスを認証するために使用されるドメイン CONTOSOEAST のメンバーです。

```
wbadmin enable backup –addtarget:\\backupshare\backup1 –include: D:\documents –user:CONTOSOEAST\aekel –password:$3hM9^5lp –schedule:00:00,19:00
```

ボリューム T: の毎日のバックアップのスケジュールを設定し、D:\documents 1:00 フォルダーをドライブ H:、フォルダーを除外 `d:\documents\~tmp` し、ボリュームシャドウコピーサービスを使用して完全バックアップを実行するには、次のように入力します。

```
wbadmin enable backup –addtarget:H: –include T:,D:\documents –exclude D:\documents\~tmp –vssfull –schedule:01:00
```

## <a name="additional-references"></a>その他のリファレンス

- [コマンド ライン構文の記号](command-line-syntax-key.md)

- [wbadmin コマンド](wbadmin.md)

- [wbadmin enable backup コマンド](wbadmin-enable-backup.md)

- [wbadmin start backup コマンド](wbadmin-start-backup.md)

- [wbadmin get disks コマンド](wbadmin-get-disks.md)
