---
title: サーバーのハードウェア パフォーマンスに関する考慮事項
description: Windows Server 2016 のサーバーのハードウェア パフォーマンスに関する考慮事項
ms.topic: landing-page
ms.author: phstee
author: phstee
ms.date: 01/08/2018
ms.openlocfilehash: 43203e4ff1095cc06be970a46a1f500bfb25ab88
ms.sourcegitcommit: a7fb96c0b1d186baeb29349befbbd6bd3b955813
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/11/2020
ms.locfileid: "94522515"
---
# <a name="server-hardware-performance-considerations"></a>サーバーのハードウェア パフォーマンスに関する考慮事項

次のセクションでは、サーバーのハードウェアを選ぶときに考慮すべき重要な項目を一覧にしています。 これらのガイドラインは、サーバーのパフォーマンスを妨げる可能性があるパフォーマンスのボトルネックを取り除くのに役立ちます。

## <a name="processor-recommendations"></a>プロセッサに関する推奨事項

サーバーに 64 ビット プロセッサを選択してください。 64 ビット プロセッサのアドレス空間は非常に広く、Windows Server 2016 では必須になります。 32 ビット版のオペレーティング システムは提供されませんが、64 ビットの Windows Server 2016 のオペレーティング システムでも 32 ビット アプリケーションを実行できます。

サーバーのコンピューティング リソースを増やすために、より周波数の高いコアを持つプロセッサを使用することも、プロセッサ コア数を増やすこともできます。 CPU がシステムの制限リソースである場合、通常は周波数が 2 倍のコアが 1 つある方が、周波数が 1 倍のコア が 2 つのときよりもパフォーマンスが大きく向上します。

複数のコアで完全な線形スケーリングを提供することは想定されていません。ハイパー スレッディングが有効な場合には、ハイパー スレッディングが同一の物理コアの共有リソースに依存するため、スケーリング係数はさらに小さくなる可能性があります。


>[!Important]
> メモリと I/O サブシステムを CPU パフォーマンスと突き合わせてスケーリングしてください。逆の場合も同様です。

CPU の周波数を製造元や世代の異なるプロセッサ間で比較しないでください。誤解を招く速度指標になる可能性があるためです。

Hyper-V の場合は、プロセッサが SLAT (第 2 レベルのアドレス変換) をサポートしていることを確認してください。 Intel では Extended Page Tables (EPT) として、AMD では Nested Page Tables (NPT) として実装されます。 サーバーで SystemInfo.exe を使用することによって、この機能が提供されているかどうかを確認できます。

## <a name="cache-recommendations"></a>キャッシュに関する推奨事項

大容量の L2 または L3 プロセッサ キャッシュを選択してください。 Haswell や Skylake などの新しいアーキテクチャには、統合されたラスト レベル キャッシュ (LLC) または L4 があります。 一般的には、キャッシュの容量が大きくなるほどパフォーマンスが向上し、CPU の本来の周波数よりも大きな役割を果たすことがよくあります。

## <a name="memory-ram-and-paging-storage-recommendations"></a>メモリ (RAM) とページング ストレージに関する推奨事項

>[!Note]
> Windows Server 2016 を新たにインストールして実行した場合、Windows Server 2012 R2 と比較して、一部のシステムではストレージのパフォーマンスが低下することがあります。 Windows Server 2016 の開発では、プラットフォームのセキュリティと信頼性を強化するために、複数の変更が行われました。 これらの中には、Windows Defender を既定で有効にするなど、I/O パスの延伸につながる変更が含まれているため、特定のワークロードとパターンで I/O パフォーマンスが低下する可能性があります。 Windows Defender はシステム保護のための重要な層であるため、Microsoft では無効にすることをお勧めしていません。

メモリのニーズに合うように RAM を増やしてください。
コンピューターのメモリが不足し、より多くのメモリがすぐに必要になる場合、Windows ではページングと呼ばれる処理によってハード ディスク領域を使用してシステム RAM を補完します。 ページングが過度になると、システム全体のパフォーマンスが低下します。
ページ ファイルの配置に関する次のガイドラインに従うことで、ページングを最適化できます。
- ページ ファイルを専用の記憶装置に分離するか、少なくとも頻繁にアクセスされる他のファイルと同じ記憶装置を共有しないようにします。 たとえば、ページ ファイルとオペレーティング システム ファイルを別々の物理ディスク ドライブに配置します。

- フォールト トレラントのドライブにページ ファイルを配置します。 非フォールト トレラント ディスクに障害が発生した場合、システム クラッシュが発生する可能性があります。 フォールト トレラント ドライブにページ ファイルを配置した場合、フォールト トレラント システムはデータを複数の場所に書き込むため、データの書き込みが遅くなることがよくあることに注意してください。

- ページングに追加のディスク帯域幅が必要な場合は、複数のディスクまたはディスク アレイを使用します。 同じ物理ディスク ドライブの異なるパーティションに複数のページ ファイルを配置しないでください。

## <a name="peripheral-bus-recommendations"></a>周辺機器バスに関する推奨事項
Windows Server 2016 では、プライマリ ストレージとネットワークのインターフェイスを PCI Express (PCIe) にする必要があるため、PCI バスを備えたサーバーを推奨します。 バスの速度制限を回避するには、10 GB 以上のイーサネット アダプターに PCIe x8 以上のスロットを使用します。

## <a name="disk-recommendations"></a>ディスクに関する推奨事項
ランダム要求のサービス時間 (7,200 PRM ドライブと 15,000 RPM ドライブを比較した場合、平均で最大 2 ミリ秒) を短縮し、順次要求の帯域幅を増やすには、回転速度の高いディスクを選んでください。 ただし、回転速度の高いディスクに関しては、コスト、電力、その他の考慮事項があります。

エンタープライズ クラスの 2.5 インチ ディスクは、同等の 3.5 インチ ドライブと比べて、1 秒あたりに処理できるランダム要求の数が大幅に増加します。

頻繁にアクセスされるデータ、特に順次アクセス データを、ディスクの先頭近くに保存します。これは、最も外側の (最も速い) トラックにほぼ対応するためです。

小容量ドライブを少数の大容量ドライブに統合すると、ストレージ全体のパフォーマンスが低下する可能性があります。 スピンドルが減るので、要求サービスの同時実行数が減ります。このため、(負荷強度に応じて) スループットが低下し、応答時間が長くなる可能性があります。

I/O レートが高い、または待ち時間の影響を受けやすい I/O を持つ、読み込みが大半のディスクには、SSD と高速フラッシュ ディスクの使用が適しています。 ブート ディスクは、ブート時間を大幅に短縮できるため、SSD または高速フラッシュ ディスクの使用に適しています。

NVMe SSD は、コマンド キューの深さがより深く、割り込み処理の効率がより高く、4 KB コマンドの効率が高いため、優れたパフォーマンスを提供します。 これは、大量の同時 I/O を必要とするシナリオに特に役立ちます。


## <a name="network-and-storage-adapter-recommendations"></a>ネットワークと記憶域アダプターに関する推奨事項

次のセクションでは、高性能サーバーのネットワーク アダプターと記憶域アダプターの推奨特性を一覧にしています。 これらの設定は、負荷が高いときにネットワークまたは記憶域ハードウェアがボトルネックになるのを防ぐのに役立ちます。

### <a name="certified-adapter-usage"></a>認定アダプターの使用
Windows ハードウェア認定のテスト スイートに合格したアダプターを使用してください。

### <a name="64-bit-capability"></a>64 ビット対応
64 ビット対応のアダプターでは、高い物理メモリの位置 (4 GB より大きい) との間でダイレクト メモリ アクセス (DMA) の操作を実行できます。 ドライバーが 4 GB を超える DMA をサポートしていない場合、システムは 4 GB 未満の物理アドレス空間に I/O を二重バッファーします。

### <a name="copper-and-fiber-adapters"></a>銅線アダプターとファイバー アダプター
一般に、銅線アダプターにはファイバー アダプターと同じパフォーマンスがあり、一部のファイバー チャネル アダプターでは銅線とファイバーの両方を使用できます。 銅線アダプターが適している環境もあれば、ファイバー アダプターが適している環境もあります。

### <a name="dual--or-quad-port-adapters"></a>デュアル ポートまたはクアッド ポートのアダプター
PCI スロットの数に制限のあるサーバーでは、マルチポート アダプターが役立ちます。

SCSI バスに接続できるディスクの数に関する SCSI の制限に対処するために、一部のアダプターでは、1 つのアダプター カードに対して 2 つまたは 4 つの SCSI バスを提供しています。 通常、ファイバー チャネル アダプターには、SCSI インターフェイスの背後に隠れているディスクがない限り、アダプターに接続されるディスクの数に制限はありません。

Serial Attached SCSI (SAS) と Serial ATA (SATA) のアダプターにも、プロトコルのシリアル性のために接続数に制限がありますが、スイッチを使用することで、アタッチできるディスク数を増やすことができます。

ネットワーク アダプターには、負荷分散またはフェールオーバーのシナリオのためにこの機能があります。 通常、2 つの単一ポート ネットワーク アダプターを使用すると、同じワークロードに対して 1 つのデュアル ポート ネットワーク アダプターを使用するよりもパフォーマンスが向上します。

PCI バスの制限は、マルチポート アダプターのパフォーマンスを制限する主な要因になることがあります。 したがって、十分な帯域幅を提供する高性能 PCIe スロットへの配置を検討することが重要です。

### <a name="interrupt-moderation"></a>割り込み節度
一部のアダプターでは、ホスト プロセッサに割り込む頻度を調整して、アクティビティーまたはその完了を示すことができます。 多くの場合、割り込みを調整することにより、ホストの CPU 負荷が軽減されますが、割り込み節度がインテリジェントに実行されていない場合は、CPU の節約によって待ち時間が増える可能性があります。

### <a name="receive-side-scaling-rss-support"></a>Receive Side Scaling (RSS) のサポート
RSS を使用すると、使用可能なコンピューター プロセッサの数に合わせてパケット受信処理をスケーリングできます。 これは、10 GB 以上のイーサネットでは特に重要です。

### <a name="offload-capability-and-other-advanced-features-such-as-message-signaled-interrupt-msi-x"></a>オフロード機能およびメッセージ シグナル割り込み (MSI)-X などのその他の高度な機能
オフロード対応アダプターは、CPU を節約し、パフォーマンスを向上させます。

### <a name="dynamic-interrupt-and-deferred-procedure-call-dpc-redirection"></a>割り込みと遅延プロシージャ呼び出し (DPC) の動的リダイレクト
Windows Server 2016 では、Numa I/O により、割り込みと DPC を PCIe 記憶域アダプターで動的にリダイレクトでき、ワークロードのパーティション分割、キャッシュ ヒット率、オンボードのハードウェアの相互接続使用率を向上させることで、あらゆるマルチプロセッサ システムで I/O 負荷の高いワークロードに対応できます。

## <a name="see-also"></a>参照
- [サーバー ハードウェアの電源に関する考慮事項](power.md)
- [電源とパフォーマンスのチューニング](power/power-performance-tuning.md)
- [プロセッサの電源管理チューニング](power/processor-power-management-tuning.md)
- [推奨されるバランスのプラン パラメーター](power/recommended-balanced-plan-parameters.md)
